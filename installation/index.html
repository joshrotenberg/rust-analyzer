<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Installation - rust-analyzer</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../installation/index.html" class="active"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../troubleshooting/index.html"><strong aria-hidden="true">3.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../configuration/index.html"><strong aria-hidden="true">4.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../non_cargo_based_projects/index.html"><strong aria-hidden="true">5.</strong> Non-Cargo Based Projects</a></li><li class="chapter-item expanded "><a href="../security/index.html"><strong aria-hidden="true">6.</strong> Security</a></li><li class="chapter-item expanded "><a href="../privacy/index.html"><strong aria-hidden="true">7.</strong> Privacy</a></li><li class="chapter-item expanded "><a href="../features/index.html"><strong aria-hidden="true">8.</strong> Features</a></li><li class="chapter-item expanded "><a href="../assists/index.html"><strong aria-hidden="true">9.</strong> Assists (Code Actions)</a></li><li class="chapter-item expanded "><a href="../diagnostics/index.html"><strong aria-hidden="true">10.</strong> Diagnostics</a></li><li class="chapter-item expanded "><a href="../editor_features/index.html"><strong aria-hidden="true">11.</strong> Editor Features</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">rust-analyzer</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-analyzer/rust-analyzer/tree/master/manual" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-analyzer/rust-analyzer/edit/master/manual/src/installation/README.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>In theory, one should be able to just install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code>
binary</a> and have it automatically
work with any editor. We are not there yet, so some editor specific
setup is required.</p>
<p>Additionally, rust-analyzer needs the sources of the standard library.
If the source code is not present, rust-analyzer will attempt to install
it automatically.</p>
<p>To add the sources manually, run the following command:</p>
<pre><code>$ rustup component add rust-src
</code></pre>
<h2 id="toolchain"><a class="header" href="#toolchain">Toolchain</a></h2>
<p>Only the latest stable standard library source is officially supported
for use with rust-analyzer. If you are using an older toolchain or have
an override set, rust-analyzer may fail to understand the Rust source.
You will either need to update your toolchain or use an older version of
rust-analyzer that is compatible with your toolchain.</p>
<p>If you are using an override in your project, you can still force
rust-analyzer to use the stable toolchain via the environment variable
<code>RUSTUP_TOOLCHAIN</code>. For example, with VS Code or coc-rust-analyzer:</p>
<pre><code>{ &quot;rust-analyzer.server.extraEnv&quot;: { &quot;RUSTUP_TOOLCHAIN&quot;: &quot;stable&quot; } }
</code></pre>
<h2 id="vs-code"><a class="header" href="#vs-code">VS Code</a></h2>
<p>This is the best supported editor at the moment. The rust-analyzer
plugin for VS Code is maintained <a href="https://github.com/rust-lang/rust-analyzer/tree/master/editors/code">in
tree</a>.</p>
<p>You can install the latest release of the plugin from <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer">the
marketplace</a>.</p>
<p>Note that the plugin may cause conflicts with the <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">previous official
Rust
plugin</a>.
The latter is no longer maintained and should be uninstalled.</p>
<p>The server binary is stored in the extension install directory, which
starts with <code>rust-lang.rust-analyzer-</code> and is located under:</p>
<ul>
<li>
<p>Linux: <code>~/.vscode/extensions</code></p>
</li>
<li>
<p>Linux (Remote, such as WSL): <code>~/.vscode-server/extensions</code></p>
</li>
<li>
<p>macOS: <code>~/.vscode/extensions</code></p>
</li>
<li>
<p>Windows: <code>%USERPROFILE%\.vscode\extensions</code></p>
</li>
</ul>
<p>As an exception, on NixOS, the extension makes a copy of the server and
stores it under
<code>~/.config/Code/User/globalStorage/rust-lang.rust-analyzer</code>.</p>
<p>Note that we only support the two most recent versions of VS Code.</p>
<h3 id="updates"><a class="header" href="#updates">Updates</a></h3>
<p>The extension will be updated automatically as new versions become
available. It will ask your permission to download the matching language
server version binary if needed.</p>
<h4 id="nightly"><a class="header" href="#nightly">Nightly</a></h4>
<p>We ship nightly releases for VS Code. To help us out by testing the
newest code, you can enable pre-release versions in the Code extension
page.</p>
<h3 id="manual-installation"><a class="header" href="#manual-installation">Manual installation</a></h3>
<p>Alternatively, download a VSIX corresponding to your platform from the
<a href="https://github.com/rust-lang/rust-analyzer/releases">releases</a> page.</p>
<p>Install the extension with the <code>Extensions: Install from VSIX</code> command
within VS Code, or from the command line via:</p>
<pre><code>$ code --install-extension /path/to/rust-analyzer.vsix
</code></pre>
<p>If you are running an unsupported platform, you can install
<code>rust-analyzer-no-server.vsix</code> and compile or obtain a server binary.
Copy the server anywhere, then add the path to your settings.json, for
example:</p>
<pre><code>{ &quot;rust-analyzer.server.path&quot;: &quot;~/.local/bin/rust-analyzer-linux&quot; }
</code></pre>
<h3 id="building-from-source"><a class="header" href="#building-from-source">Building From Source</a></h3>
<p>Both the server and the Code plugin can be installed from source:</p>
<pre><code>$ git clone https://github.com/rust-lang/rust-analyzer.git &amp;&amp; cd rust-analyzer
$ cargo xtask install
</code></pre>
<p>You’ll need Cargo, nodejs (matching a supported version of VS Code) and
npm for this.</p>
<p>Note that installing via <code>xtask install</code> does not work for VS Code
Remote, instead you’ll need to install the <code>.vsix</code> manually.</p>
<p>If you’re not using Code, you can compile and install only the LSP
server:</p>
<pre><code>$ cargo xtask install --server
</code></pre>
<p>Make sure that <code>.cargo/bin</code> is in <code>$PATH</code> and precedes paths where
<code>rust-analyzer</code> may also be installed. Specifically, <code>rustup</code> includes a
proxy called <code>rust-analyzer</code>, which can cause problems if you’re
planning to use a source build or even a downloaded binary.</p>
<h2 id="rust-analyzer-language-server-binary"><a class="header" href="#rust-analyzer-language-server-binary">rust-analyzer Language Server Binary</a></h2>
<p>Other editors generally require the <code>rust-analyzer</code> binary to be in
<code>$PATH</code>. You can download pre-built binaries from the
<a href="https://github.com/rust-lang/rust-analyzer/releases">releases</a> page.
You will need to uncompress and rename the binary for your platform,
e.g. from <code>rust-analyzer-aarch64-apple-darwin.gz</code> on Mac OS to
<code>rust-analyzer</code>, make it executable, then move it into a directory in
your <code>$PATH</code>.</p>
<p>On Linux to install the <code>rust-analyzer</code> binary into <code>~/.local/bin</code>,
these commands should work:</p>
<pre><code>$ mkdir -p ~/.local/bin
$ curl -L https://github.com/rust-lang/rust-analyzer/releases/latest/download/rust-analyzer-x86_64-unknown-linux-gnu.gz | gunzip -c - &gt; ~/.local/bin/rust-analyzer
$ chmod +x ~/.local/bin/rust-analyzer
</code></pre>
<p>Make sure that <code>~/.local/bin</code> is listed in the <code>$PATH</code> variable and use
the appropriate URL if you’re not on a <code>x86-64</code> system.</p>
<p>You don’t have to use <code>~/.local/bin</code>, any other path like <code>~/.cargo/bin</code>
or <code>/usr/local/bin</code> will work just as well.</p>
<p>Alternatively, you can install it from source using the command below.
You’ll need the latest stable version of the Rust toolchain.</p>
<pre><code>$ git clone https://github.com/rust-lang/rust-analyzer.git &amp;&amp; cd rust-analyzer
$ cargo xtask install --server
</code></pre>
<p>If your editor can’t find the binary even though the binary is on your
<code>$PATH</code>, the likely explanation is that it doesn’t see the same <code>$PATH</code>
as the shell, see <a href="https://github.com/rust-lang/rust-analyzer/issues/1811">this
issue</a>. On Unix,
running the editor from a shell or changing the <code>.desktop</code> file to set
the environment should help.</p>
<h3 id="rustup"><a class="header" href="#rustup">rustup</a></h3>
<p><code>rust-analyzer</code> is available in <code>rustup</code>:</p>
<pre><code>$ rustup component add rust-analyzer
</code></pre>
<h3 id="arch-linux"><a class="header" href="#arch-linux">Arch Linux</a></h3>
<p>The <code>rust-analyzer</code> binary can be installed from the repos or AUR (Arch
User Repository):</p>
<ul>
<li>
<p><a href="https://www.archlinux.org/packages/community/x86_64/rust-analyzer/"><code>rust-analyzer</code></a>
(built from latest tagged source)</p>
</li>
<li>
<p><a href="https://aur.archlinux.org/packages/rust-analyzer-git"><code>rust-analyzer-git</code></a>
(latest Git version)</p>
</li>
</ul>
<p>Install it with pacman, for example:</p>
<pre><code>$ pacman -S rust-analyzer
</code></pre>
<h3 id="gentoo-linux"><a class="header" href="#gentoo-linux">Gentoo Linux</a></h3>
<p><code>rust-analyzer</code> is available in the GURU repository:</p>
<ul>
<li>
<p><a href="https://gitweb.gentoo.org/repo/proj/guru.git/tree/dev-util/rust-analyzer?id=9895cea62602cfe599bd48e0fb02127411ca6e81"><code>dev-util/rust-analyzer</code></a>
builds from source</p>
</li>
<li>
<p><a href="https://gitweb.gentoo.org/repo/proj/guru.git/tree/dev-util/rust-analyzer-bin?id=9895cea62602cfe599bd48e0fb02127411ca6e81"><code>dev-util/rust-analyzer-bin</code></a>
installs an official binary release</p>
</li>
</ul>
<p>If not already, GURU must be enabled (e.g. using
<code>app-eselect/eselect-repository</code>) and sync’d before running <code>emerge</code>:</p>
<pre><code>$ eselect repository enable guru &amp;&amp; emaint sync -r guru
$ emerge rust-analyzer-bin
</code></pre>
<h3 id="macos"><a class="header" href="#macos">macOS</a></h3>
<p>The <code>rust-analyzer</code> binary can be installed via
<a href="https://brew.sh/">Homebrew</a>.</p>
<pre><code>$ brew install rust-analyzer
</code></pre>
<h2 id="vs-code-or-vscodium-in-flatpak"><a class="header" href="#vs-code-or-vscodium-in-flatpak">VS Code or VSCodium in Flatpak</a></h2>
<p>Setting up <code>rust-analyzer</code> with a Flatpak version of Code is not trivial
because of the Flatpak sandbox. While the sandbox can be disabled for
some directories, <code>/usr/bin</code> will always be mounted under
<code>/run/host/usr/bin</code>. This prevents access to the system’s C compiler, a
system-wide installation of Rust, or any other libraries you might want
to link to. Some compilers and libraries can be acquired as Flatpak
SDKs, such as <code>org.freedesktop.Sdk.Extension.rust-stable</code> or
<code>org.freedesktop.Sdk.Extension.llvm15</code>.</p>
<p>If you use a Flatpak SDK for Rust, there should be no extra steps
necessary.</p>
<p>If you want to use Flatpak in combination with <code>rustup</code>, the following
steps might help:</p>
<ul>
<li>
<p>both Rust and <code>rustup</code> have to be installed using
<a href="https://rustup.rs">https://rustup.rs</a>. Distro packages <em>will not</em> work.</p>
</li>
<li>
<p>you need to launch Code, open a terminal and run <code>echo $PATH</code></p>
</li>
<li>
<p>using
<a href="https://flathub.org/apps/details/com.github.tchx84.Flatseal">Flatseal</a>,
you must add an environment variable called <code>PATH</code>. Set its value to
the output from above, appending <code>:~/.cargo/bin</code>, where <code>~</code> is the
path to your home directory. You must replace <code>~</code>, as it won’t be
expanded otherwise.</p>
</li>
<li>
<p>while Flatseal is open, you must enable access to &quot;All user files&quot;</p>
</li>
</ul>
<p>A C compiler should already be available via <code>org.freedesktop.Sdk</code>. Any
other tools or libraries you will need to acquire from Flatpak.</p>
<h2 id="emacs"><a class="header" href="#emacs">Emacs</a></h2>
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code>
binary</a>.</p>
<p>To use <code>rust-analyzer</code>, you need to install and enable one of the two
popular LSP client implementations for Emacs,
<a href="https://github.com/joaotavora/eglot">Eglot</a> or <a href="https://github.com/emacs-lsp/lsp-mode">LSP
Mode</a>. Both enable
<code>rust-analyzer</code> by default in rust buffers if it is available.</p>
<h3 id="eglot"><a class="header" href="#eglot">Eglot</a></h3>
<p>Eglot is the more minimalistic and lightweight LSP client for Emacs,
integrates well with existing Emacs functionality and is built into
Emacs starting from release 29.</p>
<p>After installing Eglot, e.g. via <code>M-x package-install</code> (not needed from
Emacs 29), you can enable it via the <code>M-x eglot</code> command or load it
automatically in <code>rust-mode</code> via</p>
<pre><code>(add-hook 'rust-mode-hook 'eglot-ensure)
</code></pre>
<p>To enable clippy, you will need to configure the initialization options
to pass the <code>check.command</code> setting.</p>
<pre><code>(add-to-list 'eglot-server-programs
             '((rust-ts-mode rust-mode) .
               (&quot;rust-analyzer&quot; :initializationOptions (:check (:command &quot;clippy&quot;)))))
</code></pre>
<p>For more detailed instructions and options see the <a href="https://joaotavora.github.io/eglot">Eglot
manual</a> (also available from Emacs
via <code>M-x info</code>) and the <a href="https://github.com/joaotavora/eglot/blob/master/README.md">Eglot
readme</a>.</p>
<p>Eglot does not support the rust-analyzer extensions to the
language-server protocol and does not aim to do so in the future. The
<a href="https://github.com/nemethf/eglot-x#rust-analyzer-extensions">eglot-x</a>
package adds experimental support for those LSP extensions.</p>
<h3 id="lsp-mode"><a class="header" href="#lsp-mode">LSP Mode</a></h3>
<p>LSP-mode is the original LSP-client for emacs. Compared to Eglot it has
a larger codebase and supports more features, like LSP protocol
extensions. With extension packages like <a href="https://github.com/emacs-lsp/lsp-mode">LSP
UI</a> it offers a lot of visual
eyecandy. Further it integrates well with <a href="https://github.com/emacs-lsp/dap-mode">DAP
mode</a> for support of the Debug
Adapter Protocol.</p>
<p>You can install LSP-mode via <code>M-x package-install</code> and then run it via
the <code>M-x lsp</code> command or load it automatically in rust buffers with</p>
<pre><code>(add-hook 'rust-mode-hook 'lsp-deferred)
</code></pre>
<p>For more information on how to set up LSP mode and its extension package
see the instructions in the <a href="https://emacs-lsp.github.io/lsp-mode/page/installation">LSP mode
manual</a>. Also
see the <a href="https://emacs-lsp.github.io/lsp-mode/page/lsp-rust-analyzer/">rust-analyzer
section</a>
for <code>rust-analyzer</code> specific options and commands, which you can
optionally bind to keys.</p>
<p>Note the excellent
<a href="https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/">guide</a> from
<a href="https://github.com/rksm">@rksm</a> on how to set-up Emacs for Rust
development with LSP mode and several other packages.</p>
<h2 id="vimneovim"><a class="header" href="#vimneovim">Vim/Neovim</a></h2>
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code>
binary</a>. Not needed if the
extension can install/update it on its own, coc-rust-analyzer is one
example.</p>
<p>There are several LSP client implementations for Vim or Neovim:</p>
<h3 id="coc-rust-analyzer"><a class="header" href="#coc-rust-analyzer">coc-rust-analyzer</a></h3>
<ol>
<li>
<p>Install coc.nvim by following the instructions at
<a href="https://github.com/neoclide/coc.nvim">coc.nvim</a> (Node.js required)</p>
</li>
<li>
<p>Run <code>:CocInstall coc-rust-analyzer</code> to install
<a href="https://github.com/fannheyward/coc-rust-analyzer">coc-rust-analyzer</a>,
this extension implements <em>most</em> of the features supported in the
VSCode extension:</p>
<ul>
<li>
<p>automatically install and upgrade stable/nightly releases</p>
</li>
<li>
<p>same configurations as VSCode extension,
<code>rust-analyzer.server.path</code>, <code>rust-analyzer.cargo.features</code> etc.</p>
</li>
<li>
<p>same commands too, <code>rust-analyzer.analyzerStatus</code>,
<code>rust-analyzer.ssr</code> etc.</p>
</li>
<li>
<p>inlay hints for variables and method chaining, <em>Neovim Only</em></p>
</li>
</ul>
</li>
</ol>
<p>Note: for code actions, use <code>coc-codeaction-cursor</code> and
<code>coc-codeaction-selected</code>; <code>coc-codeaction</code> and <code>coc-codeaction-line</code>
are unlikely to be useful.</p>
<h3 id="languageclient-neovim"><a class="header" href="#languageclient-neovim">LanguageClient-neovim</a></h3>
<ol>
<li>
<p>Install LanguageClient-neovim by following the instructions
<a href="https://github.com/autozimu/LanguageClient-neovim">here</a></p>
<ul>
<li>The GitHub project wiki has extra tips on configuration</li>
</ul>
</li>
<li>
<p>Configure by adding this to your Vim/Neovim config file (replacing
the existing Rust-specific line if it exists):</p>
<pre><code>let g:LanguageClient_serverCommands = {
\ 'rust': ['rust-analyzer'],
\ }
</code></pre>
</li>
</ol>
<h3 id="youcompleteme"><a class="header" href="#youcompleteme">YouCompleteMe</a></h3>
<p>Install YouCompleteMe by following the instructions
<a href="https://github.com/ycm-core/YouCompleteMe#installation">here</a>.</p>
<p>rust-analyzer is the default in ycm, it should work out of the box.</p>
<h3 id="ale"><a class="header" href="#ale">ALE</a></h3>
<p>To use the LSP server in <a href="https://github.com/dense-analysis/ale">ale</a>:</p>
<pre><code>let g:ale_linters = {'rust': ['analyzer']}
</code></pre>
<h3 id="nvim-lsp"><a class="header" href="#nvim-lsp">nvim-lsp</a></h3>
<p>Neovim 0.5 has built-in language server support. For a quick start
configuration of rust-analyzer, use
<a href="https://github.com/neovim/nvim-lspconfig#rust_analyzer">neovim/nvim-lspconfig</a>.
Once <code>neovim/nvim-lspconfig</code> is installed, use
<code>lua require'lspconfig'.rust_analyzer.setup({})</code> in your <code>init.vim</code>.</p>
<p>You can also pass LSP settings to the server:</p>
<pre><code>lua &lt;&lt; EOF
local nvim_lsp = require'lspconfig'

local on_attach = function(client)
    require'completion'.on_attach(client)
end

nvim_lsp.rust_analyzer.setup({
    on_attach=on_attach,
    settings = {
        [&quot;rust-analyzer&quot;] = {
            imports = {
                granularity = {
                    group = &quot;module&quot;,
                },
                prefix = &quot;self&quot;,
            },
            cargo = {
                buildScripts = {
                    enable = true,
                },
            },
            procMacro = {
                enable = true
            },
        }
    }
})
EOF
</code></pre>
<p>See <a href="https://sharksforarms.dev/posts/neovim-rust/">https://sharksforarms.dev/posts/neovim-rust/</a> for more tips on
getting started.</p>
<p>Check out <a href="https://github.com/simrat39/rust-tools.nvim">https://github.com/simrat39/rust-tools.nvim</a> for a batteries
included rust-analyzer setup for Neovim.</p>
<h3 id="vim-lsp"><a class="header" href="#vim-lsp">vim-lsp</a></h3>
<p>vim-lsp is installed by following <a href="https://github.com/prabirshrestha/vim-lsp">the plugin
instructions</a>. It can be as
simple as adding this line to your <code>.vimrc</code>:</p>
<pre><code>Plug 'prabirshrestha/vim-lsp'
</code></pre>
<p>Next you need to register the <code>rust-analyzer</code> binary. If it is available
in <code>$PATH</code>, you may want to add this to your <code>.vimrc</code>:</p>
<pre><code>if executable('rust-analyzer')
  au User lsp_setup call lsp#register_server({
        \   'name': 'Rust Language Server',
        \   'cmd': {server_info-&gt;['rust-analyzer']},
        \   'whitelist': ['rust'],
        \ })
endif
</code></pre>
<p>There is no dedicated UI for the server configuration, so you would need
to send any options as a value of the <code>initialization_options</code> field, as
described in the <a href="#configuration">Configuration</a> section. Here is an
example of how to enable the proc-macro support:</p>
<pre><code>if executable('rust-analyzer')
  au User lsp_setup call lsp#register_server({
        \   'name': 'Rust Language Server',
        \   'cmd': {server_info-&gt;['rust-analyzer']},
        \   'whitelist': ['rust'],
        \   'initialization_options': {
        \     'cargo': {
        \       'buildScripts': {
        \         'enable': v:true,
        \       },
        \     },
        \     'procMacro': {
        \       'enable': v:true,
        \     },
        \   },
        \ })
endif
</code></pre>
<h2 id="sublime-text"><a class="header" href="#sublime-text">Sublime Text</a></h2>
<h3 id="sublime-text-4"><a class="header" href="#sublime-text-4">Sublime Text 4:</a></h3>
<ul>
<li>Follow the instructions in
<a href="https://github.com/sublimelsp/LSP-rust-analyzer">LSP-rust-analyzer</a>.</li>
</ul>
<p>Install
<a href="https://packagecontrol.io/packages/LSP-file-watcher-chokidar">LSP-file-watcher-chokidar</a>
to enable file watching (<code>workspace/didChangeWatchedFiles</code>).</p>
<h3 id="sublime-text-3"><a class="header" href="#sublime-text-3">Sublime Text 3:</a></h3>
<ul>
<li>
<p>Install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code>
binary</a>.</p>
</li>
<li>
<p>Install the <a href="https://packagecontrol.io/packages/LSP">LSP package</a>.</p>
</li>
<li>
<p>From the command palette, run <code>LSP: Enable Language Server Globally</code>
and select <code>rust-analyzer</code>.</p>
</li>
</ul>
<p>If it worked, you should see &quot;rust-analyzer, Line X, Column Y&quot; on the
left side of the status bar, and after waiting a bit, functionalities
like tooltips on hovering over variables should become available.</p>
<p>If you get an error saying <code>No such file or directory: 'rust-analyzer'</code>,
see the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>
section on installing the language server binary.</p>
<h2 id="gnome-builder"><a class="header" href="#gnome-builder">GNOME Builder</a></h2>
<p>GNOME Builder 3.37.1 and newer has native <code>rust-analyzer</code> support. If
the LSP binary is not available, GNOME Builder can install it when
opening a Rust file.</p>
<h2 id="eclipse-ide"><a class="header" href="#eclipse-ide">Eclipse IDE</a></h2>
<p>Support for Rust development in the Eclipse IDE is provided by <a href="https://github.com/eclipse/corrosion">Eclipse
Corrosion</a>. If available in PATH
or in some standard location, <code>rust-analyzer</code> is detected and powers
editing of Rust files without further configuration. If <code>rust-analyzer</code>
is not detected, Corrosion will prompt you for configuration of your
Rust toolchain and language server with a link to the <em>Window &gt;
Preferences &gt; Rust</em> preference page; from here a button allows to
download and configure <code>rust-analyzer</code>, but you can also reference
another installation. You’ll need to close and reopen all .rs and Cargo
files, or to restart the IDE, for this change to take effect.</p>
<h2 id="kate-text-editor"><a class="header" href="#kate-text-editor">Kate Text Editor</a></h2>
<p>Support for the language server protocol is built into Kate through the
LSP plugin, which is included by default. It is preconfigured to use
rust-analyzer for Rust sources since Kate 21.12.</p>
<p>To change rust-analyzer config options, start from the following example
and put it into Kate’s &quot;User Server Settings&quot; tab (located under the LSP
Client settings):</p>
<pre><code>{
    &quot;servers&quot;: {
        &quot;rust&quot;: {
            &quot;initializationOptions&quot;: {
                &quot;cachePriming&quot;: {
                    &quot;enable&quot;: false
                },
                &quot;check&quot;: {
                    &quot;allTargets&quot;: false
                },
                &quot;checkOnSave&quot;: false
            }
        }
    }
}
</code></pre>
<p>Then click on apply, and restart the LSP server for your rust project.</p>
<h2 id="juci"><a class="header" href="#juci">juCi++</a></h2>
<p><a href="https://gitlab.com/cppit/jucipp">juCi++</a> has built-in support for the
language server protocol, and since version 1.7.0 offers installation of
both Rust and rust-analyzer when opening a Rust file.</p>
<h2 id="kakoune"><a class="header" href="#kakoune">Kakoune</a></h2>
<p><a href="https://kakoune.org/">Kakoune</a> supports LSP with the help of
<a href="https://github.com/kak-lsp/kak-lsp"><code>kak-lsp</code></a>. Follow the
<a href="https://github.com/kak-lsp/kak-lsp#installation">instructions</a> to
install <code>kak-lsp</code>. To configure <code>kak-lsp</code>, refer to the <a href="https://github.com/kak-lsp/kak-lsp#configuring-kak-lsp">configuration
section</a> which
is basically about copying the <a href="https://github.com/kak-lsp/kak-lsp/blob/master/kak-lsp.toml">configuration
file</a> in
the right place (latest versions should use <code>rust-analyzer</code> by default).</p>
<p>Finally, you need to configure Kakoune to talk to <code>kak-lsp</code> (see <a href="https://github.com/kak-lsp/kak-lsp#usage">Usage
section</a>). A basic
configuration will only get you LSP but you can also activate inlay
diagnostics and auto-formatting on save. The following might help you
get all of this.</p>
<pre><code>eval %sh{kak-lsp --kakoune -s $kak_session}  # Not needed if you load it with plug.kak.
hook global WinSetOption filetype=rust %{
    # Enable LSP
    lsp-enable-window

    # Auto-formatting on save
    hook window BufWritePre .* lsp-formatting-sync

    # Configure inlay hints (only on save)
    hook window -group rust-inlay-hints BufWritePost .* rust-analyzer-inlay-hints
    hook -once -always window WinSetOption filetype=.* %{
        remove-hooks window rust-inlay-hints
    }
}
</code></pre>
<h2 id="helix"><a class="header" href="#helix">Helix</a></h2>
<p><a href="https://docs.helix-editor.com/">Helix</a> supports LSP by default.
However, it won’t install <code>rust-analyzer</code> automatically. You can follow
instructions for installing <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code>
binary</a>.</p>
<h2 id="visual-studio-2022"><a class="header" href="#visual-studio-2022">Visual Studio 2022</a></h2>
<p>There are multiple rust-analyzer extensions for Visual Studio 2022 on
Windows:</p>
<h3 id="rust-analyzervs"><a class="header" href="#rust-analyzervs">rust-analyzer.vs</a></h3>
<p>(License: Creative Commons Attribution-NonCommercial-ShareAlike 4.0
International)</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=kitamstudios.RustAnalyzer">Visual Studio
Marketplace</a></p>
<p><a href="https://github.com/kitamstudios/rust-analyzer/">GitHub</a></p>
<p>Support for Rust development in the Visual Studio IDE is enabled by the
<a href="https://marketplace.visualstudio.com/items?itemName=kitamstudios.RustAnalyzer">rust-analyzer</a>
package. Either click on the download link or install from IDE’s
extension manager. For now <a href="https://visualstudio.microsoft.com/downloads/">Visual Studio
2022</a> is required. All
editions are supported viz. Community, Professional &amp; Enterprise. The
package aims to provide 0-friction installation and therefore comes
loaded with most things required including rust-analyzer binary. If
anything it needs is missing, appropriate errors / warnings will guide
the user. E.g. cargo.exe needs to be in path and the package will tell
you as much. This package is under rapid active development. So if you
encounter any issues please file it at
<a href="https://github.com/kitamstudios/rust-analyzer/">rust-analyzer.vs</a>.</p>
<h3 id="vs_rustanalyzer"><a class="header" href="#vs_rustanalyzer">VS_RustAnalyzer</a></h3>
<p>(License: GPL)</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=cchharris.vsrustanalyzer">Visual Studio
Marketplace</a></p>
<p><a href="https://github.com/cchharris/VS-RustAnalyzer">GitHub</a></p>
<h3 id="sourcegear-rust"><a class="header" href="#sourcegear-rust">SourceGear Rust</a></h3>
<p>(License: closed source)</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=SourceGear.SourceGearRust">Visual Studio
Marketplace</a></p>
<p><a href="https://github.com/sourcegear/rust-vs-extension">GitHub (docs, issues,
discussions)</a></p>
<ul>
<li>
<p>Free (no-cost)</p>
</li>
<li>
<p>Supports all editions of Visual Studio 2022 on Windows: Community,
Professional, or Enterprise</p>
</li>
</ul>
<h2 id="lapce"><a class="header" href="#lapce">Lapce</a></h2>
<p><a href="https://lapce.dev/">Lapce</a> has a Rust plugin which you can install
directly. Unfortunately, it downloads an old version of <code>rust-analyzer</code>,
but you can set the server path under Settings.</p>
<h2 id="crates"><a class="header" href="#crates">Crates</a></h2>
<p>There is a package named <code>ra_ap_rust_analyzer</code> available on
<a href="https://crates.io/crates/ra_ap_rust-analyzer">crates.io</a>, for someone
who wants to use it programmatically.</p>
<p>For more details, see <a href="https://github.com/rust-lang/rust-analyzer/blob/master/.github/workflows/publish.yml">the publish
workflow</a>.</p>
<h2 id="zed"><a class="header" href="#zed">Zed</a></h2>
<p><a href="https://zed.dev">Zed</a> has native <code>rust-analyzer</code> support. If the LSP
binary is not available, Zed can install it when opening a Rust file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../troubleshooting/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../troubleshooting/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
